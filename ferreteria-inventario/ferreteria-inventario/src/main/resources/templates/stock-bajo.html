<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art√≠culos con Stock Bajo - Sistema de Inventario</title>
    <link rel="stylesheet" th:href="@{/estilos/stock-bajo.css}">

</head>
<body>
<div class="container">
    <div class="header">
        <div class="warning-icon">‚ö†</div>
        <h1>Art√≠culos con Stock Bajo</h1>
        <p>Alertas de inventario que requieren atenci√≥n inmediata</p>
    </div>

    <nav class="nav">
        <a th:href="@{/}">Inicio</a>
        <a th:href="@{/registrar}">Registrar Art√≠culo</a>
        <a th:href="@{/consultar}">Consultar</a>
    </nav>

    <div class="content">
        <!-- Banner -->
        <div class="alert-banner" th:if="${articulos != null and !articulos.isEmpty()}">
            <h2>Atenci√≥n Requerida</h2>
            <p>Actualmente hay <strong th:text="${total}">0</strong> art√≠culo(s) con stock por debajo del m√≠nimo.</p>
        </div>

        <!-- Tabla -->
        <div class="table-container" th:if="${articulos != null and !articulos.isEmpty()}">
            <table>
                <thead>
                <tr>
                    <th>Prioridad</th>
                    <th>C√≥digo</th>
                    <th>Nombre</th>
                    <th>Categor√≠a</th>
                    <th>Stock Actual</th>
                    <th>Stock M√≠nimo</th>
                    <th>Faltante</th>
                    <th>Proveedor</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="articulo : ${articulos}"
                    th:classappend="${(articulo.stockActual ?: 0) == 0} ? 'priority-high' : 'priority-medium'">

                    <td>
                        <span th:if="${(articulo.stockActual ?: 0) == 0}" class="badge badge-danger">üî¥ ALTA</span>
                        <span th:if="${(articulo.stockActual ?: 0) > 0}" class="badge badge-warning">üü° MEDIA</span>
                    </td>
                    <td><strong th:text="${articulo.codigo}"></strong></td>
                    <td th:text="${articulo.nombre}"></td>
                    <td th:text="${articulo.categoria}"></td>
                    <td style="text-align:center;" th:text="${articulo.stockActual}"></td>
                    <td style="text-align:center;" th:text="${articulo.stockMinimo}"></td>
                    <td style="text-align:center;" class="faltante">
                        <span th:text="${(articulo.stockMinimo ?: 0) - (articulo.stockActual ?: 0)}"></span>
                    </td>
                    <td th:text="${articulo.proveedor != null ? articulo.proveedor : 'No especificado'}"></td>
                    <td>
                        <div class="actions">
                            <a th:href="@{/editar/{id}(id=${articulo.id})}" class="btn btn-warning">Editar</a>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Si no hay art√≠culos -->
        <div class="empty-state" th:if="${articulos == null or articulos.isEmpty()}">
            <div class="icon">‚úÖ</div>
            <h3>¬°Todo en orden!</h3>
            <p>No hay art√≠culos con stock por debajo del m√≠nimo.</p>
            <a th:href="@{/}" class="btn btn-info" style="margin-top:20px;">Volver al Inicio</a>
        </div>
    </div>
</div>
</body>
</html>
